(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{150:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return m}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var c=r.a.createContext({}),u=function(e){var t=r.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},b=function(e){var t=u(e.components);return r.a.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),b=u(n),d=a,m=b["".concat(i,".").concat(d)]||b[d]||p[d]||o;return n?r.a.createElement(m,l(l({ref:t},c),{},{components:n})):r.a.createElement(m,l({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,i[1]=l;for(var c=2;c<o;c++)i[c]=n[c];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},233:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/dns-setup-2285ace1a1446eddfacd989b2eeabfd6.png"},89:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return l})),n.d(t,"toc",(function(){return s})),n.d(t,"default",(function(){return u}));var a=n(3),r=n(7),o=(n(0),n(150)),i={id:"installation",title:"Installation"},l={unversionedId:"getting-started/installation",id:"getting-started/installation",isDocsHomePage:!1,title:"Installation",description:"Prerequisites Details",source:"@site/docs/getting-started/installation.md",slug:"/getting-started/installation",permalink:"/getting-started/installation",version:"current",sidebar:"someSidebar",previous:{title:"Introduction",permalink:"/getting-started/introduction"},next:{title:"Advanced Installation",permalink:"/getting-started/advanced-installation"}},s=[{value:"Prerequisites Details",id:"prerequisites-details",children:[]},{value:"Chart Details",id:"chart-details",children:[]},{value:"Installing the chart",id:"installing-the-chart",children:[{value:"Prerequisites",id:"prerequisites",children:[]},{value:"Install Argo Workflow",id:"install-argo-workflow",children:[]},{value:"Install Cert-Manager",id:"install-cert-manager",children:[]},{value:"Install KintoHub",id:"install-kintohub",children:[]},{value:"Configure and Access KintoHub",id:"configure-and-access-kintohub",children:[]}]},{value:"Uninstall the chart",id:"uninstall-the-chart",children:[]}],c={toc:s};function u(e){var t=e.components,i=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},c,i,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"prerequisites-details"},"Prerequisites Details"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"Kubernetes 1.15+")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"https://kubernetes.io/docs/tasks/tools/install-kubectl/"},Object(o.b)("inlineCode",{parentName:"a"},"kubectl"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"https://helm.sh/"},Object(o.b)("inlineCode",{parentName:"a"},"Helm v3.5+")))),Object(o.b)("h2",{id:"chart-details"},"Chart Details"),Object(o.b)("p",null,"The chart will do the following:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Deploy ",Object(o.b)("a",{parentName:"li",href:"https://github.com/kintoproj/kinto-dashboard"},"Kinto Dashboard")),Object(o.b)("li",{parentName:"ul"},"Deploy ",Object(o.b)("a",{parentName:"li",href:"https://github.com/kintoproj/kinto-core"},"Kinto Core")),Object(o.b)("li",{parentName:"ul"},"Deploy ",Object(o.b)("a",{parentName:"li",href:"https://github.com/kintoproj/kinto-builder"},"Kinto Builder")),Object(o.b)("li",{parentName:"ul"},"Deploy ",Object(o.b)("a",{parentName:"li",href:"https://github.com/bitnami/charts/tree/master/bitnami/nginx-ingress-controller"},"Nginx Ingress Controller")),Object(o.b)("li",{parentName:"ul"},"Deploy ",Object(o.b)("a",{parentName:"li",href:"https://github.com/bappr/proxless"},"Proxless")),Object(o.b)("li",{parentName:"ul"},"Deploy ",Object(o.b)("a",{parentName:"li",href:"https://github.com/minio/charts"},"Minio"))),Object(o.b)("h2",{id:"installing-the-chart"},"Installing the chart"),Object(o.b)("p",null,"If you are experienced with Kubernetes, you can customize your installation ",Object(o.b)("a",{parentName:"p",href:"/getting-started/advanced-installation"},"here"),"."),Object(o.b)("h3",{id:"prerequisites"},"Prerequisites"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",{parentName:"p",href:"https://github.com/argoproj/argo-workflows"},"Argo Workflow")),Object(o.b)("blockquote",{parentName:"li"},Object(o.b)("p",{parentName:"blockquote"},Object(o.b)("strong",{parentName:"p"},"Note:")," KintoHub has been tested with argo workflow chart 0.16.6."))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"KintoHub does not support its private docker registry yet. You must use an external one (docker hub, gcr, ecr, acr, etc.)."))),Object(o.b)("h3",{id:"install-argo-workflow"},"Install Argo Workflow"),Object(o.b)("p",null,Object(o.b)("em",{parentName:"p"},"Notes: for ",Object(o.b)("inlineCode",{parentName:"em"},"containerd")," runtime, you need to add ",Object(o.b)("inlineCode",{parentName:"em"},"--set controller.containerRuntimeExecutor=kubelet")," (k8s +1.20)")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-sh"},"kubectl create namespace argo\nhelm repo add argo https://argoproj.github.io/argo-helm\nhelm upgrade --install argo \\\n              --version 0.16.6 \\\n              --set installCRD=true \\\n              --set singleNamespace=false \\\n              --set useDefaultArtifactRepo=true \\\n              --set artifactRepository.archiveLogs=true \\\n              --set artifactRepository.s3.accessKeySecret.name=kinto-minio \\\n              --set artifactRepository.s3.accessKeySecret.key=accesskey \\\n              --set artifactRepository.s3.secretKeySecret.name=kinto-minio \\\n              --set artifactRepository.s3.secretKeySecret.key=secretkey \\\n              --set artifactRepository.s3.insecure=true \\\n              --set artifactRepository.s3.bucket=argo-artifacts \\\n              --set artifactRepository.s3.endpoint=kinto-minio:9000 \\\n              --set artifactRepository.minio.install=false \\\n              --namespace argo argo/argo\n")),Object(o.b)("h3",{id:"install-cert-manager"},"Install Cert-Manager"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},Object(o.b)("a",{parentName:"p",href:"https://cert-manager.io/docs/"},"Cert Manager")),Object(o.b)("blockquote",{parentName:"li"},Object(o.b)("p",{parentName:"blockquote"},Object(o.b)("strong",{parentName:"p"},"Note:")," KintoHub has been tested with cert-manager chart v0.15.0.")))),Object(o.b)("p",null,Object(o.b)("em",{parentName:"p"},"You must have a domain name ready to be used. KintoHub only supports Cloudflare at the moment, you can create a free account and transfer your domain ownership easily. Please create an issue if you want to add more providers.")),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-sh"},"kubectl create namespace cert-manager\nhelm repo add jetstack https://charts.jetstack.io\nhelm upgrade --install cert-manager \\\n              --version v0.15.0 \\\n              --set installCRDs=true \\\n              --namespace cert-manager jetstack/cert-manager\n")),Object(o.b)("h3",{id:"install-kintohub"},"Install KintoHub"),Object(o.b)("p",null,"This will install KintoHub with ",Object(o.b)("strong",{parentName:"p"},"PUBLIC")," dashboard access.\nFor more secure setup, please check our ",Object(o.b)("a",{parentName:"p",href:"/getting-started/advanced-installation"},"advanced installation"),"."),Object(o.b)("p",null,"Don't forget the change the values inside the curly braces."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-sh"},"kubectl create ns kintohub\nhelm repo add kintohub https://kintoproj.github.io/kinto-helm\n\nhelm upgrade --install kinto \\\n              --set common.domainName='{your_domain}' \\\n              --set common.ssl.enabled=true \\\n              --set common.ssl.issuer.email={your_email} \\\n              --set common.ssl.issuer.solver.cloudflare.email={your_cloudflare_account} \\\n              --set common.ssl.issuer.solver.cloudflare.cloudflareApiToken={your_cloudflare_api_token} \\\n              --set builder.env.IMAGE_REGISTRY_HOST={your_image_registry_host} \\\n              --set builder.workflow.docker.registry={your_image_registry_api_host} \\\n              --set builder.workflow.docker.email={your_image_registry_email} \\\n              --set builder.workflow.docker.username={your_image_registry_username} \\\n              --set builder.workflow.docker.password={your_image_registry_password} \\\n              --set minio.resources.requests.memory=null \\\n              --set nginx-ingress-controller.service.type=LoadBalancer \\\n              --set core.ingress.enabled=true \\\n              --set dashboard.ingress.enabled=true \\             \n              --namespace kintohub kintohub/kinto\n")),Object(o.b)("p",null,"This is an example for the configuration using ",Object(o.b)("inlineCode",{parentName:"p"},"oss.kintohub.net")," as domain, with ",Object(o.b)("inlineCode",{parentName:"p"},"dockerhub")," as image registry (public)."),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-sh"},"\nhelm upgrade --install kinto \\\n              --set common.domainName='oss.kintohub.net' \\\n              --set common.ssl.enabled=true \\\n              --set common.ssl.issuer.email=devaccounts@kintohub.com \\\n              --set common.ssl.issuer.solver.cloudflare.email=devaccounts@kintohub.com \\\n              --set common.ssl.issuer.solver.cloudflare.cloudflareApiToken={cloudflare-api-token} \\\n              --set builder.env.IMAGE_REGISTRY_HOST=kintohub \\\n              --set builder.workflow.docker.registry=https://index.docker.io/v1/ \\\n              --set builder.workflow.docker.email=devaccounts@kintohub.com \\\n              --set builder.workflow.docker.username=kintohub \\\n              --set builder.workflow.docker.password={dockerhub-api-token} \\\n              --set minio.resources.requests.memory=null \\\n              --set nginx-ingress-controller.service.type=LoadBalancer \\\n              --set core.ingress.enabled=true \\\n              --set dashboard.ingress.enabled=true \\             \n              --namespace kintohub kintohub/kinto\n")),Object(o.b)("h3",{id:"configure-and-access-kintohub"},"Configure and Access KintoHub"),Object(o.b)("p",null,"In order to configure KintoHub dashboard and the services it deploy, you should configure your DNS with the instructions shown after KintoHub is installed. "),Object(o.b)("p",null,"i.e. You should see the following instruction after you install KintoHub:"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-sh"},'######################################\n\nSETUP:\n\n1.  Get the IP of your Load Balancer.\n    NOTE: It may take a few minutes for the LoadBalancer public IP to be available!\n\n    You can watch the status of the service by running `kubectl get svc -n kintohub -w kinto-nginx-ingress-controller`.\n    export LB_IP=$(kubectl get service kinto-nginx-ingress-controller -n kintohub -o jsonpath="{.status.loadBalancer.ingress[0].ip}")\n    echo ${LB_IP}\n    \n...\n')),Object(o.b)("p",null,"Execute the following line (it may return empty but just wait a while, as the load balancer may take time to setup )"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-sh"},'export LB_IP=$(kubectl get service kinto-nginx-ingress-controller -n kintohub -o jsonpath="{.status.loadBalancer.ingress[0].ip}")\necho ${LB_IP}\n\n> 104.248.96.100\n')),Object(o.b)("p",null,"Configure the A record with the IP you got on your DNS provider."),Object(o.b)("p",null,"For example on cloudflare if you have a domain ",Object(o.b)("inlineCode",{parentName:"p"},"example.com"),":"),Object(o.b)("p",null,Object(o.b)("img",{alt:"DNS Setup",src:n(233).default})),Object(o.b)("p",null,"All your subdomain ",Object(o.b)("inlineCode",{parentName:"p"},"*.kinto.example.com")," are now pointed to KintoHub. i.e. your services deployed by KintoHub should have the url like ",Object(o.b)("inlineCode",{parentName:"p"},"services-ae21234.kinto.example.com"),", and at the same time you can access the dashboard at ",Object(o.b)("inlineCode",{parentName:"p"},"dashboard.kinto.example.com")," "),Object(o.b)("h2",{id:"uninstall-the-chart"},"Uninstall the chart"),Object(o.b)("pre",null,Object(o.b)("code",{parentName:"pre",className:"language-sh"},"helm uninstall kinto --namespace kintohub\nkubectl delete ns kintohub\n")),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},Object(o.b)("strong",{parentName:"p"},"Note:")," you can use the same command to uninstall argo and cert-manager too.")))}u.isMDXComponent=!0}}]);